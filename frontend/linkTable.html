{{ define "link" }}
<div id="bookmark-{{.ID}}">
	<div>
		<article role="">
			<header>
				<nav>
					<ul>
						<li>
							<a data-hx-target="#bookmark-{{.ID}}" data-hx-patch="/bookmarks/{{.ID}}?action=bump">⏫</a>
						</li>
					</ul>
					<ul><li><a href="{{.URL}}" title="{{ .Title }}" target="_blank" rel="noopener noreferrer">{{.Title}}</a></li></ul>
					<ul>
						<li>
							<a data-hx-target="#bookmark-{{.ID}}" data-hx-patch="/bookmarks/{{.ID}}?action=update&inbox=read">✔</a>
							<a data-hx-target="#bookmark-{{.ID}}" data-hx-delete="/bookmarks/{{.ID}}"                        hx-confirm="Confirm delete?">🗑️</a>
						</li>
					</ul>
				</nav>
			</header>
			{{ .Description | linebreaks}}
			{{ if .URL }}
			<hr>
			<a href="{{.URL}}" title="{{ .Title }}" target="_blank" rel="noopener noreferrer">{{ .URL }}</a>
			{{ if not (or (eq .LastStatusCode 200)) }}<span>⚠️ {{.LastStatusCode}} {{.LastStatusCode | httpStatusCode}} - {{ .LastStatusReason }}</span>{{ end }}
			{{ end }}
		</article>

	</div>
</div>
{{ end }}
{{ $nextPage := .NextPage }}
{{ $previousLastDate := .PreviousLastDate }}
{{ with .Links }}
	{{ $lastDate := "" }}
	{{- range $_, $links := . }}
		<div class="dategroup" id="date-{{ .Date | slugify }}">
			{{ if ne $previousLastDate .Date }}
			<hr/>
			<div>{{ .Date }}</div>
			{{ end }}
			{{ range .Links }}
			{{ template "link" . }}
			{{ end }}
			{{ $lastDate = .Date }}
		</div>
	{{- end }}
	{{ if gt $nextPage -1 }}
	<div hx-get="?page={{ $nextPage }}&lastDate={{ $lastDate }}" hx-trigger="revealed" hx-swap="beforeend" hx-target="#container"></div>
	{{ end }}
{{ end }}
